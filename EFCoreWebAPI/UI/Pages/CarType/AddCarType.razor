@page "/cartypes/add"
@inject UI.Services.CarTypeService carTypeService
@inject NavigationManager navigationManager
@inject IStringLocalizer<AddCarType> L
@attribute [Authorize(Roles = "admin")]
<h3>@L["Add car type"]</h3>
<hr />
<EditForm Model="@carType" OnValidSubmit="@Add">
    <FluentValidator></FluentValidator>
    <ValidationSummary />
    <p>@Error</p>
    <p>
        <MatTextField @bind-Value="@carType.type" Label="@L["Car type"]"></MatTextField>
    </p>
    <button type="submit" class="btn btn-sm btn-primary">@L["Add"]</button>
</EditForm>
@code {
    CarTypeViewModel carType { get; set; } = new CarTypeViewModel();
    string Error { get; set; } = "";
    protected async Task Add()
    {
        Error = "";
        var result = await carTypeService.AddCarTypeAsync(carType);
        if (result.IsSuccessStatusCode)
            navigationManager.NavigateTo("/cartypes");
        else
            Error = result.StatusCode.ToString();
    }

}
